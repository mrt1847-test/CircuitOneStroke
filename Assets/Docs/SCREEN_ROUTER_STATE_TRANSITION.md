# 화면 라우터 상태 전이 정의

화면 구성과 하단 메뉴 노출 여부, 상태 전이를 한눈에 정의합니다.

---

## 1. 화면 정의 (화면 기준)

| 화면 | 설명 | 하단 메뉴(탭 바) | 비고 |
|------|------|------------------|------|
| **메인홈** | 레벨을 선택할 수 있는 페이지. Home 탭. | ✅ 있음 (상점 · **홈** · 셋팅) | 탭형 이동, 현재 = 홈 |
| **상점** | 광고 제거 상품·기타 아이템 구매 페이지. Shop 탭. | ✅ 있음 (**상점** · 홈 · 셋팅) | 탭 터치 시 현재 페이지(상점) 표시 |
| **셋팅** | 배경음·효과음·진동·언어 설정 등. Settings 탭. | ✅ 있음 (상점 · 홈 · **셋팅**) | 탭 터치 시 현재 페이지(셋팅) 표시 |
| **게임화면** | 레벨 선택 후 진입하는 메인 게임 화면. | ❌ **없음** | 메인홈/상점/셋팅에서 보이던 하단 바 비노출 |

**정리**: 메인홈·상점·셋팅은 **하단 메뉴가 항상 같은 형태**로 있고, 탭만 바뀌며 **현재 어떤 페이지인지 하이라이트**로 보여 줌. 게임화면은 **하단 바가 없는 풀스크린** 구조.

---

## 2. 코드와의 매핑

| 화면(문서) | ScreenMode | MainTab | 구현 |
|------------|------------|---------|------|
| 메인홈 | MainShell | Home | `ShowMainShell(Home)` / `ShowTab(Home)` |
| 상점 | MainShell | Shop | `ShowTab(Shop)` |
| 셋팅 | MainShell | Settings | `ShowTab(Settings)` |
| 게임화면 | GamePlay | (무관) | `EnterGame(levelId)` → mainShell 비활성, gameRoot 활성 |

- **하단 바 노출**: `MainShellRoot` 활성 시 노출, `GameRoot`만 활성(게임화면)일 때는 `MainShellRoot` 비활성으로 **하단 바 없음**.

---

## 3. 상태 전이 표

### 3.1 현재 상태 → 행동 → 다음 상태

| 현재 상태 | 사용자 행동(또는 시스템) | 다음 상태 |
|-----------|--------------------------|------------|
| 메인홈 | 탭: 상점 | 상점 (하단 바 동일, 상점 하이라이트) |
| 메인홈 | 탭: 셋팅 | 셋팅 (하단 바 동일, 셋팅 하이라이트) |
| 메인홈 | 레벨 선택 후 진입 | **게임화면** (하단 바 없음) |
| 상점 | 탭: 홈 | 메인홈 |
| 상점 | 탭: 셋팅 | 셋팅 |
| 셋팅 | 탭: 홈 | 메인홈 |
| 셋팅 | 탭: 상점 | 상점 |
| 게임화면 | 나가기(백/홈 버튼 등) | **메인홈** (하단 바 다시 노출) |

### 3.2 전이 시 호출(참고)

| 전이 | API/동작 |
|------|----------|
| 어느 탭이든 → 다른 탭 | `AppRouter.ShowTab(MainTab)` |
| 메인홈(레벨 선택) → 게임화면 | `RequestStartLevel(levelId)` → Transition → `EnterGame(levelId)` |
| 게임화면 → 메인홈 | `ExitGameToHomeTab()` → `ShowMainShell(MainTab.Home)` |

---

## 4. 하단 메뉴 요약

| 구분 | 메인홈 | 상점 | 셋팅 | 게임화면 |
|------|--------|------|------|----------|
| 하단 바 존재 | ✅ | ✅ | ✅ | ❌ |
| 선택된 탭 표시 | 홈 | 상점 | 셋팅 | — |

**결론**: 말씀하신 대로, **메인홈/상점/셋팅은 탭형 하단 메뉴가 있고**, **게임화면에 들어가면 그 하단 바가 없는 형태**가 맞습니다.
